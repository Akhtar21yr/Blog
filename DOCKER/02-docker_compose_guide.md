![me](../assets/mine/github-banner-mine.png)

# Introduction to Docker Compose

Docker Compose is a tool used for defining and running multi-container Docker applications. It allows you to describe your application's services, networks, and volumes in a single file, called `docker-compose.yml`, and manage them as a cohesive unit. This simplifies the process of setting up and running complex applications, making it easier to develop, test, and deploy applications consistently across different environments.
![docker-compose](../assets/docker/02-docker_compose_guide/docker-compose-button.jpg)
## Why Use Docker Compose?

- **Simplified Setup**: Define and manage multiple containers with a single command.
- **Environment Consistency**: Ensure that your application runs consistently across different environments, from development to production.
- **Efficient Resource Management**: Easily scale services up or down by adjusting the service definitions.
- **Networking Made Easy**: Automatically creates networks and connects containers, allowing them to communicate with each other effortlessly.
- **Reusable Configurations**: Share the `docker-compose.yml` file with your team to replicate the environment quickly.

## Key Concepts

- **Services**: Each service corresponds to a container and is defined in the `docker-compose.yml` file.
- **Networks**: Allows services to communicate with each other, usually by service name.
- **Volumes**: Persist data generated by and used by Docker containers.

## Basic Usage of Docker Compose

### Step 1: Install Docker Compose

Ensure Docker is installed, then install Docker Compose by following the official installation instructions for your operating system.

### Step 2: Define Services in `docker-compose.yml`

Create a `docker-compose.yml` file in your project directory:

```yaml
version: '3'
services:
  web:
    image: nginx:latest
    ports:
      - "80:80"
  app:
    build: .
    ports:
      - "5000:5000"
    volumes:
      - .:/code
    depends_on:
      - db
  db:
    image: postgres:latest
    environment:
      POSTGRES_DB: exampledb
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
```

### Explanation

- **web**: Uses the Nginx image and maps port 80 of the container to port 80 of the host.
- **app**: Builds the application from the Dockerfile in the current directory, maps port 5000, and mounts the current directory as a volume.
- **db**: Uses the Postgres image, sets environment variables for database configuration.

### Step 3: Build and Run the Application

To start the services defined in the `docker-compose.yml` file, run:

\`\`\`bash
docker-compose up
\`\`\`

- **`docker-compose up`**: Builds, (re)creates, starts, and attaches to containers for a service.
- **`docker-compose down`**: Stops and removes containers, networks, volumes, and images created by `up`.

### Step 4: Scale Services

You can scale the number of container instances for a service using:

\`\`\`bash
docker-compose up --scale app=3
\`\`\`

This will run 3 instances of the `app` service.

## Common Commands

- **`docker-compose build`**: Builds or rebuilds services.
- **`docker-compose start`**: Starts existing containers for a service.
- **`docker-compose stop`**: Stops running containers without removing them.
- **`docker-compose restart`**: Restarts containers.
- **`docker-compose ps`**: Lists containers.
- **`docker-compose logs`**: Views output from containers.

## Conclusion

Docker Compose is a powerful tool that simplifies the management of multi-container Docker applications. By defining your services in a single `docker-compose.yml` file, you can easily manage and scale your application across different environments, ensuring consistency and efficiency.
